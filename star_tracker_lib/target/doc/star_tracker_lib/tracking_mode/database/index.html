<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The database for the pyramid method is a set of 2 lookup tables (star pairs, star catalogue) and an equation (k-vector)"><title>star_tracker_lib::tracking_mode::database - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-cb6f1f67f1bcd037.css" id="mainThemeStyle"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="star_tracker_lib" data-themes="" data-resource-suffix="" data-rustdoc-version="1.73.0-nightly (8771282d4 2023-07-23)" data-channel="nightly" data-search-js="search-6dfdfced5eff6596.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-6d2c9675f3d09c26.css" data-theme-dark-css="dark-45ceb8f2e522f4d1.css" data-theme-ayu-css="ayu-fd19013d6ce078bf.css" ><script src="../../../static.files/storage-db41da1a38ea3cb8.js"></script><script defer src="../../../static.files/main-0795b7d26be81095.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../../static.files/light-6d2c9675f3d09c26.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../../static.files/dark-45ceb8f2e522f4d1.css"><link rel="stylesheet" href="../../../static.files/noscript-cffde32267a19fd6.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../../star_tracker_lib/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../../star_tracker_lib/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module database</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../../index.html">star_tracker_lib</a>::<wbr><a href="../index.html">tracking_mode</a>::<wbr><a class="mod" href="#">database</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../../src/star_tracker_lib/tracking_mode/database/mod.rs.html#1-400">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>The database for the pyramid method is a set of 2 lookup tables (star pairs, star catalogue) and an equation (k-vector)</p>
<h2 id="k-vector"><a href="#k-vector">K-Vector</a></h2>
<p>The k-vector is a fast lookup table which has a time complexity independent of the size of the database.
It uses an equation to locate specific <em>bins</em> in the database where the element can be found.</p>
<h3 id="equations"><a href="#equations">Equations</a></h3>
<p><strong>Variables</strong></p>
<ul>
<li><code>m</code> - Gradient</li>
<li><code>q</code> - Intercept</li>
<li><code>y</code> - The input variable (angular distance).</li>
</ul>
<h4 id="prepossessing"><a href="#prepossessing">Prepossessing</a></h4>
<p>This is the process of creating the k-vector, this is only required once.
<strong>Symbols</strong></p>
<ul>
<li><code>D_max</code> - The maximum value of an element in the database.</li>
<li><code>D_min</code> - The minimum value of an element in the database.</li>
<li><code>n</code> - The number of elements in the database.</li>
<li><code>N</code> - The number of vector bins, a larger value will be faster, however it will cost more memory, ideal: N = n.</li>
<li><code>d</code> - (n - 1)</li>
<li><code>e</code> - Relative machine precision rust uses <a href="https://en.wikipedia.org/wiki/Machine_epsilon">binary32/64</a>.
<ul>
<li><code>f32 = 1.19e-07</code></li>
<li><code>f64 = 2.22e-16</code></li>
</ul>
</li>
</ul>
<p><strong>Finding Gradient</strong>
<code>m = ( D_max - D_min + 2 d e ) / ( N - 1 )</code></p>
<p><strong>Finding Intercept</strong>
<code>q = D_min - d e</code></p>
<h4 id="searching"><a href="#searching">Searching</a></h4>
<p>By inputting 2 equations, the bounds of the element can be found.
<code>k_a = floor(y - q) / m + 1</code>
<code>k_b = ceil(y - q) / m</code>
i is within k_a and k_b.</p>
<h2 id="list-of-pairs"><a href="#list-of-pairs">List of Pairs</a></h2>
<ul>
<li>The list of star pairs is a lookup table containing 2 references to stars.</li>
<li>The stars will have their angular distances calculated, this will be the order they are sorted in.</li>
<li>The stars should only form a pair if they are within the same field of view.</li>
<li>The index and position are not required to store.
e.g.</li>
</ul>
<div><table><thead><tr><th style="text-align: center">index</th><th style="text-align: center">a</th><th style="text-align: center">b</th></tr></thead><tbody>
<tr><td style="text-align: center">0</td><td style="text-align: center">*star a</td><td style="text-align: center">*star b</td></tr>
<tr><td style="text-align: center">1</td><td style="text-align: center">*star c</td><td style="text-align: center">*star b</td></tr>
<tr><td style="text-align: center">2</td><td style="text-align: center">*star c</td><td style="text-align: center">*star a</td></tr>
<tr><td style="text-align: center">…</td><td style="text-align: center">…</td><td style="text-align: center">…</td></tr>
</tbody></table>
</div><h2 id="star-catalogue"><a href="#star-catalogue">Star Catalogue</a></h2>
<p>The star catalogue is just the positions of the stars.
This can be done using equatorial (less memory) or Cartesian coordinates (less time).
The equatorial is more beneficial for this project.
e.g.</p>
<div><table><thead><tr><th style="text-align: center">index (*star)</th><th style="text-align: center">ra</th><th style="text-align: center">dec</th></tr></thead><tbody>
<tr><td style="text-align: center">0 (*star a)</td><td style="text-align: center">1</td><td style="text-align: center">-1</td></tr>
<tr><td style="text-align: center">1 (*star b)</td><td style="text-align: center">2</td><td style="text-align: center">1</td></tr>
<tr><td style="text-align: center">2 (*star c)</td><td style="text-align: center">2</td><td style="text-align: center">-1</td></tr>
<tr><td style="text-align: center">3 (*star d)</td><td style="text-align: center">3</td><td style="text-align: center">0</td></tr>
<tr><td style="text-align: center">…</td><td style="text-align: center">…</td><td style="text-align: center">…</td></tr>
</tbody></table>
</div></div></details><h2 id="reexports" class="small-section-header"><a href="#reexports">Re-exports</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.Database"><code>pub use crate::tracking_mode::database::database::<a class="trait" href="database/trait.Database.html" title="trait star_tracker_lib::tracking_mode::database::database::Database">Database</a>;</code></div></li><li><div class="item-name" id="reexport.ChunkIterator"><code>pub use crate::tracking_mode::database::chunk_iterator::<a class="trait" href="chunk_iterator/trait.ChunkIterator.html" title="trait star_tracker_lib::tracking_mode::database::chunk_iterator::ChunkIterator">ChunkIterator</a>;</code></div></li></ul><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="chunk_iterator/index.html" title="mod star_tracker_lib::tracking_mode::database::chunk_iterator">chunk_iterator</a></div><div class="desc docblock-short">Implementation of ChunkIterator</div></li><li><div class="item-name"><a class="mod" href="database/index.html" title="mod star_tracker_lib::tracking_mode::database::database">database</a></div><div class="desc docblock-short">Used for any database.
A set of functions may not be relevant to the required database, however, it is made universal.</div></li><li><div class="item-name"><a class="mod" href="pyramid_database/index.html" title="mod star_tracker_lib::tracking_mode::database::pyramid_database">pyramid_database</a></div></li><li><div class="item-name"><a class="mod" href="regional_database/index.html" title="mod star_tracker_lib::tracking_mode::database::regional_database">regional_database</a></div></li><li><div class="item-name"><a class="mod" href="search_result/index.html" title="mod star_tracker_lib::tracking_mode::database::search_result">search_result</a></div><div class="desc docblock-short">Implementation of SearchResult.</div></li></ul><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.ChunkAreaSearch.html" title="struct star_tracker_lib::tracking_mode::database::ChunkAreaSearch">ChunkAreaSearch</a></div><div class="desc docblock-short">Like ChunkIteratorEquatorial except it does not iterate.<br />
This is used so that you can search a small reagion of the sky.<br />
The usecase is if you have a general idea of the location of the attitude but not good enough.
For areas that go past 360 degrees, either use a negative min bounds or a value over 360 for max.</div></li><li><div class="item-name"><a class="struct" href="struct.ChunkIteratorDeclination.html" title="struct star_tracker_lib::tracking_mode::database::ChunkIteratorDeclination">ChunkIteratorDeclination</a></div><div class="desc docblock-short">A chunk iterator is a way of optimizing the database search process.<br />
When searching the database for star matches, the database will return matches from around the entire celestial sphere.<br />
To ensure that all the pairs are within the same camera frame, a chunk iterator is used to move between each chunk/region.<br />
This ensures that only stars within the field of view will be used.</div></li><li><div class="item-name"><a class="struct" href="struct.ChunkIteratorEquatorial.html" title="struct star_tracker_lib::tracking_mode::database::ChunkIteratorEquatorial">ChunkIteratorEquatorial</a></div><div class="desc docblock-short">A chunk iterator is a way of optimizing the database search process.<br />
When searching the database for star matches, the database will return matches from around the entire celestial sphere.<br />
To ensure that all the pairs are within the same camera frame, a chunk iterator is used to move between each chunk/region.<br />
This ensures that only stars within the field of view will be used.</div></li><li><div class="item-name"><a class="struct" href="struct.ChunkIteratorNone.html" title="struct star_tracker_lib::tracking_mode::database::ChunkIteratorNone">ChunkIteratorNone</a></div><div class="desc docblock-short">A chunk iterator is a way of optimizing the database search process.<br />
When searching the database for star matches, the database will return matches from around the entire celestial sphere.<br />
To ensure that all the pairs are within the same camera frame, a chunk iterator is used to move between each chunk/region.<br />
This ensures that only stars within the field of view will be used.</div></li><li><div class="item-name"><a class="struct" href="struct.ChunkIteratorRegional.html" title="struct star_tracker_lib::tracking_mode::database::ChunkIteratorRegional">ChunkIteratorRegional</a></div><div class="desc docblock-short">A chunk iterator is a way of optimizing the database search process.<br />
When searching the database for star matches, the database will return matches from around the entire celestial sphere.<br />
To ensure that all the pairs are within the same camera frame, a chunk iterator is used to move between each chunk/region.<br />
This ensures that only stars within the field of view will be used.</div></li><li><div class="item-name"><a class="struct" href="struct.KVector.html" title="struct star_tracker_lib::tracking_mode::database::KVector">KVector</a></div><div class="desc docblock-short">The database equation which points to the star pair database.</div></li><li><div class="item-name"><a class="struct" href="struct.PyramidDatabase.html" title="struct star_tracker_lib::tracking_mode::database::PyramidDatabase">PyramidDatabase</a></div><div class="desc docblock-short">The compiled k-vector database, this will allow the construction of the database and the lookup of elements in the database.</div></li><li><div class="item-name"><a class="struct" href="struct.RegionalDatabase.html" title="struct star_tracker_lib::tracking_mode::database::RegionalDatabase">RegionalDatabase</a></div><div class="desc docblock-short">This database is required for the ChunkIteratorRegional.<br />
A list specifying the chunk the star is located in is required as the iterator uses a bitfield.</div></li><li><div class="item-name"><a class="struct" href="struct.SearchResult.html" title="struct star_tracker_lib::tracking_mode::database::SearchResult">SearchResult</a></div><div class="desc docblock-short">The result for querying for a close match star pair.
Used in Database::find_close_ref.</div></li></ul><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.KVectorSearch.html" title="trait star_tracker_lib::tracking_mode::database::KVectorSearch">KVectorSearch</a></div></li></ul></section></div></main></body></html>